
# Release Notes

  - **v2.1.3** - 2020/00/00
    - 不具合修正がメインです
    - **局ロゴ表示に伴う変更**
      - **局ロゴ表示用の新規 API (/api/logo) を追加したため、リバースプロキシで運用されている方はリバースプロキシ側の設定変更が必要になります**
        - 他の API 同様に Apache の場合は Substitute 、nginx の場合は sub_filter で /api/logo の URL を置換するように設定します
          - 頻繁に変更になってしまい申し訳ないです…（把握しきれてない）
        - 詳しくは [Reverse_Proxy.md](Reverse_Proxy.md) を参照してください
      - **環境設定の［EDCB_Material_WebUI の API がある URL］が［EDCB_Material_WebUI のある URL］に変わりました**
        - 今まで http://192.168.1.11:5510/api/ だったものが http://192.168.1.11:5510/ だけでよくなります
        - 互換性の観点から api/ が付いていた場合は除去するようにしていますが、できるだけ http://192.168.1.11:5510/ のように設定することを推奨します
    - **局ロゴを表示できるようにした**
      - 以前から複数要望をいただいていましたが、ようやく実装できました
      - **事前に TVTest で .bmp 形式の局ロゴを取得しておきましょう**
        - **必ず TVTest の設定 →［EPG/番組情報］→［BMP形式のロゴを保存する］にチェックを入れてからロゴを取得してください**
          - 取得した局ロゴは LogoData ファイルに保存されていますが、中身は特殊なバイナリになっているため読み取れません
          - 地デジは1チャンネルごとにしばらく放置していると取得できます（局ロゴの表示プラグインで確認しましょう）
          - BS・CS110 の局ロゴはチャンネルを BS1 に合わせたまま放置すると全てのチャンネルのロゴが取得できるらしいです
          - 全てのロゴを取得しきってしまっている（BMP形式のロゴは保存してない）場合は局ロゴを取得できないことがあるようです
            - 一旦 LogoData と LogoData.ini を削除かリネームして、最初からロゴ取得をやり直した方がいいかもしれません
        - TVTest 内の Logo フォルダに大量の局ロゴ (.bmp ファイル) が保存されていれば EMWUI (と TVRemotPlus) で局ロゴを使用できます
        - TVTest で .bmp 形式の局ロゴを取得できていない放送局はデフォルト画像が代わりに表示されます
      - **EDCB_Material_WebUI (EMWUI) の局ロゴ表示機能を利用しているので、あらかじめ EMWUI で局ロゴを表示できる状態にしておく必要があります**
        - EDCB と同じ階層に TVTest があり、かつ TVTest フォルダ内に 局ロゴ (.bmp ファイル) が入っている Logo フォルダ と LogoData.ini がある場合は自動で局ロゴが表示されるはずです
        - TVTest が EDCB と異なる階層にある場合は、EDCB\Setting\HttpPublic.ini に
          `LOGO_INI=C:\DTV\TVTest\LogoData.ini`
          `LOGO_DIR=C:\DTV\TVTest\Logo`
          のようにLogoData.ini と Logo フォルダへのパスを設定してください
        - 局ロゴが表示されないときは、まず EMWUI の［番組表］や［放送中］に局ロゴを表示することを目標にしてみてください
          - EMWUI で局ロゴを表示できれば TVRemotePlus でも表示できるはずです
      - 局ロゴを表示しない事もできます、［個人設定］→［番組表に局ロゴを表示］からオフにしてください
    - **ファイル再生でコメントを遅らせる事ができるようにした**
      - 録画時の設定で前後に数秒マージンを取って録画している場合、コメントの描画が早くなってタイミングがずれてしまう事があります
      - これは TVRemotePlus が番組自体の放送時刻を使ってコメントを取得しているためです
        - 例えば途中から録画した場合はかなりコメントがズレてしまいますが、これも仕様です
      - 例えば前後5秒録画マージンを取っている場合は、［個人設定］→［コメントの遅延時間（ファイル再生・秒）］を 5 に設定すると、コメントがぴったりのタイミングで表示されるはずです
    - **一部のショートカットキーを変更した**
      - 今まで S キーだった［ストリームの同期］は L キーに変更になりました
      - また、［字幕の表示/非表示を切り替える］が S キー、［コメントの表示/非表示を切り替える］が D キーに変更になっています
      - この他、［コメント入力フォームを表示してフォーカスする］C キーは、コメント入力フォームからフォーカスを外した上で、もう一度押すとコメント入力フォームを隠すようになりました
    - **幽霊化していたフォルダを削除**
      - Git が大文字と小文字を区別する一方 Windows では区別しないので齟齬があったことが原因
    - **ストリームを開始する際に既存のログがあれば削除するようにした**
      - あまり意味なさそう
      - tstask.1.log になるのをどうにかしたかったが無理そうなので諦めた
    - **スタイルの調整**
      - モーダルの登場・退場アニメーションをフェードだけから変更してみました
    - **ツイート投稿周りの不具合を修正**
    - **iOS 環境で Progressive 画質が選択できない問題を修正**
      - ようやく修正できました
    - **ファイル再生で「もっと見る」をクリック or タップした際に全ての番組が表示される不具合を修正**
      - リストに表示する件数を指定できるようにしてからのエラーだったらしい（int のはずが str になってた）
    - **iPhone5s サイズの端末で発生するスタイル崩れを修正**
      - モーダルが画面が小さすぎて収まりきらない場合があるので、適宜スクロールさせるようにしてみました
      - また、サイドメニューのうち下に隠れた部分がスクロールできない問題を修正しました
    - **番組表内各局の次の番組の長さが現在放送中の番組のものと同じになる不具合を修正**
      - 番組表機能を実装したときからの不具合だったみたいです…
      - 全く気づきませんでした、報告ありがとうございました
    - **初回アクセス時にコメント一覧と Twitter 投稿フォームが表示されない問題を修正**
      - 作りが甘かった…
    - **上固定・下固定のコメントが巻き戻してもう一度再生するとスクロールコメントになってしまう不具合を修正**
      - 最初に表示した時は指定通り上固定 or 下固定で表示されますが、巻き戻してもう一度再生するなど、コメントが再度表示されると全てスクロールコメントになってしまっていました
    - **リバースプロキシの URL の末尾にスラッシュがついていない場合にリバースプロキシ機能がうまく動作しない問題を修正**
      - Twitter で教えていただきました、ありがとうございました
    - **使う見込みのない php-ffi を削除**
    - **ファイル再生時に日付が表示されなくなっていた問題を修正**
    - **プレイヤーのコメント入力欄で「？」を入力するとショートカット一覧が表示されてしまうのを改善した**
      - Mac のみの現象だったので気づかなかった…
    - **キャストの初期化に失敗することがある問題を修正**
    - **プレイヤー (DPlayer) を v1.26.0 に更新**
      - 1年半ぶりのリリースみたいです
      - まれにプレイヤーが再生と停止を繰り返す状態になるなどの数多くの不具合が修正されています
      - また、AirPlay のサポートが追加されているようです（環境がないので使えるかは不明）
    - **QSVEncC を 4.04 に更新**
      - 3.28 からサポート終了につき Windows7 環境で動かなくなってしまっていたので保留にしていましたが、4.03 で確認したら Windows7 でも動くことを確認したので更新しました
      - もしお使いの Windows7 環境で動かない場合は 3.28 で上書きしてみてください
        - QSVEncC 3.28 は動作環境で Windows7 がサポートされている最後のバージョンです
        - QSVEncC64.exe が QSVEncC-tvrp.exe にリネームされてるので注意
    - **NVEncC を 5.09 に更新**
      - NVEncC もいつのまにか Windows7 のサポートが切られていましたがこちらの環境では動くことを確認したので更新しました
    - **VCEEncC を 6.02 に更新**
      - Radeon の 5000 シリーズでインターレース解除を行う場合は 6.02 でないと動かないらしいので、同梱分はアップデートすることにしました
      - Windows7 で Radeon GPU が動く環境がないのでなんとも言えませんが、もしお使いの Windows7 環境で動かない場合は 5.01 で上書きしてみてください
        - VCEEncC 5.01 は動作環境で Windows7 がサポートされている最後のバージョンです
        - VCEEncC64.exe が VCEEncC-tvrp.exe にリネームされてるので注意
    - **jQuery を 3.5.0 に更新**
    - **FontAwesome を 5.13.0 に更新**
    - そのほか細かな修正

  - **v2.1.2** - 2020/04/15
    - 前回のアップデートで確認された不具合の修正などです
    - 前のリリースノートでも書きましたが、このバージョンに致命的な不具合がない限りしばらく更新しないと思います
    - **TSTask の起動時に TSTaskCentre も起動できるようにした**
      - 環境設定から変更できます
      - ライブ配信がいつまで経っても開始できないときとかに見てみてください（ほぼほぼデバッグ用…）
    - **キーボードショートカットを追加した**
      - 字幕の表示 / 非表示を切り替えるには J キー、コメントの表示 / 非表示を切り替えるには K キーを押してください
      - ついでにキーボードショートカットキー一覧も ? キーで表示できるようにしました
    - **新規インストール時にインストーラーから EDCB Material WebUI の API がある URL を設定できるようにした**
      - 事実上必須の設定にもかかわらずインストール時に設定させないのは不親切な気がしたので…
    - **EDCB Material WebUI の API がある URL に自己署名証明書が指定されている HTTPS URL を指定できるようにした**
      - EDCB Mateial WebUI を自己署名証明書で HTTPS 化してる環境向けです
      - いままでは証明書が不正ですブッブーとエラーが出ていましたが、それを抑制するようにしました
    - **一部の環境で Apache が起動できない問題を修正**
      - PHP がロードする dll が httpd.exe と同じフォルダになくて読み込めていなかったのが原因らしい
    - **2つ以上 TVRemotePlus 組み込みの Apache を起動するとどちらかが落ちる不具合を修正**
      - OPCache を有効化したはいいものの、Windows では2つ OPCache でキャッシュしたファイルをメモリ上に置くことができないらしい
      - メモリの確保に失敗した場合はファイルキャッシュにフォールバックするよう設定することで解消した
        - キャッシュは C:/Windows/Temp 以下に保存されるため、システムの起動ドライブが C: ドライブ以外だとうまくいかないかもしれません  
          その場合は (TVRemotePlus)/bin/PHP/php.ini 内の opcache.file_cache を適宜変更してください
    - **一部ファイル・フォルダの大文字化を反映した**
      - ローカルの開発環境では twitteroauth → TwitterOAuth などのように変更していたのですが、Git のデフォルトではファイル・フォルダ名の大文字と小文字を区別しないらしく、小文字のままになっていました
      - git config core.ignorecase false で解決
    - **インストーラーの不具合を改善した**
      - **新規インストール時に php.ini の extension_dir（ PHP の拡張機能があるパス）を絶対パスに書き換えるようにした**
        - 今までは httpd.exe からの相対パスを指定していましたが、httpd.exe を起動した際の作業フォルダが異なっているなど、拡張機能を読み込めない場合がありました
        - インストール時に絶対パスに書き換えておくことで、これらの問題を解消できます
      - **設定の引き継ぎ時に以前のバージョンにない変数があると空白が設定されてしまう問題を修正**
    - **TVRemotePlus-CommandLine が動かなくなっていた問題を修正**
      - コマンドラインからストリームの開始・終了ができる（隠し）機能ですが、最近の機能追加で使えない状態になっていました
      - ライブ配信だけでなくファイル再生もコマンドラインから行えるようにしてみましたが、番組情報が取得できないことに気づいたのと必要性を感じなかったのでやめました
        - 要望があればまた実装します（ないと思いますが）
    - **ツイート投稿周りの細かな修正**
    - **NVEncC を 4.69 に更新した**
    - スタイルの調整
    - 細かい不具合の修正

  - **v2.1.1** - 2020/04/07
    - **既知の問題**
      - 録画番組リストの再構築を行わない限りリロードする度にリスト更新が発生することがある（原因不明）
      - 違うフォルダの同じファイル名の動画が存在する場合、同じ番組情報になってしまい同じ番組が2つ録れているように見えてしまう（実態は別）
      - その他挙動不審な点がいろいろ…
      - これらは全て録画番組リストを json にて無理やり管理していることが原因のため、SQLite で録画番組リストをデータベースで管理するよう、リスト更新処理を大幅に作り変えることを検討しています
      - 次のバージョンでデータベース化できればと思っていますが、しばらく多忙になる事が予想されるため暫く新規の要望は反映できないと思います
        - 録画番組リストのデータベース化を最優先で実装します
      - また、将来的に launch.exe から TVRemotePlus を起動するようにし、タスクバーに格納して Apache を launch.exe から呼び出すような形にすることを検討しています
        - コンソールウインドウの非表示化もそれの準備工事で、launch.exe から書き出されたログを閲覧できるようにしようかとも考えていますが、暫く先になりそうです
      - 5ch などでいただいた不具合報告・要望のうち、比較的実装コストが低いものは実装したはずです…
        - 他にも未実装の要望がいくつかありますが（もしくは忘れているかもしれない）、実装はしばらく先になると思います…
        - 他にも色々やり途中の残務が残っているので消化しないと回らなくなりそう…
    - **一度に表示する録画番組の件数を指定できるようにした**
      - 個人設定より変更できます
      - デフォルトは 30（件）です
    - **PHP を 7.4.4 に更新した**
    - **OPCache（ PHP の拡張機能）を有効化した**
      - PHP の更新時に拡張機能を整理したときのついで
      - PHP コードをコンパイルした上で一時的にメモリにキャッシュするもので、高速化が期待できます
      - そこまで効果はないかも…？（副作用はないので有効にするだけしておく）
    - **エンコード画質の底上げ**
      - 全体的にビットレートを上げてみました
      - ファイルサイズの増加はあまりないため、再生への影響はありません
    - **エンコーダーのコンソールウインドウの表示・非表示を切り替えられるようにした**
      - 今までは常にエンコーダーがタスクバーに表示され、クリックするとコンソールウインドウが表示される状態でしたが、今回のアップデートからはデフォルトで表示されなくなります
        - タスクバーにもデスクトップにもエンコーダーは表示されませんが、タスクマネージャーから見るとエンコーダーと TSTask（ライブ配信のみ）が起動している事が確認できます
      - また、同時にデフォルトで logs フォルダ以下にエンコーダーのログを書き出すようになります
      - エンコーダーのログはストリームの開始ごとに常に上書きされます
        - 取っておきたいログはコピーするなどして控えるようにしてください
      - タスクバーに毎回コマンドプロンプトが表示されるのが鬱陶しい、という意見をいただいていましたが、この更新にて解消されます
      - 今までの挙動に戻したい場合は、［エンコーダーのログをファイルに書き出す］をオフにした上で［エンコーダーのウインドウを表示する］をオンに設定してください
    - **コマンド実行周りの処理の改善**
      - 非同期実行を行う場合に popen() ではなく proc_open() を使うようにしました
      - proc_open() の方がより細かいオプションを指定できるほか、出力先を指定できるため汎用的です
    - **拡張子が MP4・MKV の場合にエンコードオプションに dual_mono_mode をつけないようにした**
      - TS ファイル向けのオプションで MP4・MKV には効果がない上、音声コーデックに AAC 以外が使われている場合はエンコードに失敗するためです
    - **キャスト周りの改善**
      - 前回のバージョンから Chrome 以外向けのキャスト機能が正常に動作していなかった問題を修正しました
      - デフォルトの音量を調整しました
    - **ニコニコ実況がないチャンネルの録画を再生すると「コメントの読み込みに失敗しました…」と出る問題を修正**
      - ついでに ch_sid.txt を ch_sid.tsv に変更しました
      - ch_sid.tsv に定義されていてかつ実況 ch の値が -1 のチャンネルはエラーを出さないようにしました
    - **サブチャンネルを非表示にしている状態でサブチャンネルを視聴しようとすると番組情報が全て取得できなくなる問題を修正**
      - 構造的な問題なのでサブチャンネル非表示時の現在視聴中のサブチャンネルの番組情報の表示は諦め、代替テキストを表示するようにし、エラー抑制を行うようにしました
      - サブチャンネルを番組表に表示している状態であれば現在視聴中のサブチャンネルの番組情報も表示できるほか、サブチャンネル非表示時でも番組表は正常に表示できるよう修正しました
    - **全画面時にプレイヤーのコントローラーが消えない問題を修正**
      - カーソルを動かさずに3秒経過すると自動でコントローラーが隠れます
      - カーソルを動かすとコントローラーがまた表示されます
    - **一部のチャンネル設定ファイルが正しく読み込めない不具合を修正**
    - **Ctrl + C が実行できない問題を修正**
    - **一部の番組表の記号が修飾されていない問題を修正**
    - **アイコンの色が暗めだったのを修正**
    - **一部スタイルが崩れることがある問題を修正**
    - その他細かな修正・改善

  - **v2.1.0** - 2020/03/22
    - バグフィックスがメインです
    - 全体的にコードを見直したり整理したり細かい部分の修正が多いです
    - **フォルダ構造が変わっているため、上書きインストールだと不具合が発生する可能性があります**
      - **別のフォルダに新規インストールすることをおすすめします（毎度互換性無視の新規インストールですみません…）**
    - **また、Twitter 投稿機能を使っている場合で、アップロード先のフォルダを upload/ に設定している場合は投稿に失敗します**
      - アップロード先のフォルダを空に設定すると、(TVRemotePlus)/data/upload/ に保存します 
    - **アップデートモードでインストールする際に、設定ファイルを自動で更新し、設定内容を引き継げるようにした**
      - 設定ファイルに変更があった際、毎回新規インストールする必要が（おそらく）なくなります
      - ただし、前述の通り、v2.0.0 以前から v2.1.0 へのアップデートではフォルダ構造が変わっているためアップデートモードでのインストールはおすすめしません
        - 動くには動きますが、使われないファイルが残ってゴチャゴチャする上に予期せぬ不具合を生む可能性があります
        - 実際に使えるのは v2.1.0 → (次のリリース) の時になるでしょうか
      - 古い設定ファイル内を読み込み、新しくコピーした設定ファイルを古い設定ファイルの設定内容で書き換えるような実装になっているため、うまくいかないことがあるかもしれません
    - **launch.bat を同梱するようにした**
      - ダブルクリックすると Apache が起動します
      - デスクトップのショートカットからしか公に Apache を起動する手段がないのはマズいと思ったので…
        - 処理は (TVRemotePlus)/bin/Apache/bin/httpd.exe を start コマンドで起動しているだけです
        - デスクトップのショートカットを消してしまった場合は httpd.exe へのショートカットをデスクトップに持ってきてあげてください
    - **サブチャンネルに対応し、番組表にサブチャンネルを表示できるようにした**
      - サブチャンネルは例えば TOKYO MX2 (091)・NHKEテレ3 (023) など、同じ局に複数のチャンネルがある場合の、メインではない方のチャンネルのことです
      - 常時マルチチャンネルの TOKYO MX2 などを除き、サブチャンネルでの放送がない場合はメインチャンネルと同じものが流れます
      - 個人設定 → ［サブチャンネル］をオンにするか、右上の︙メニュー →［サブチャンネルを表示］をクリック or タップすると、サブチャンネルが番組表に表示されます
      - 個人設定 → ［サブチャンネル］をオフにするか、右上の︙メニュー →［サブチャンネルを隠す］をクリック or タップすると、メインチャンネルのみ番組表に表示します
      - サブチャンネルも他のチャンネルと同様にストリームを開始できます
        - 前述の通り、サブチャンネルの放送が行われていない場合はメインチャンネルと同じ内容になります
        - ニコニコ実況はサブチャンネルごとに別れていないため、メインチャンネルと同じものが流れます
        - 半ば無理やり対応させているため、不具合があるかもしれません
    - **サブチャンネル対応の関係で、チャンネル番号の表示を Ch: 01 から Ch: 011 のように変更した**
      - 一般的なテレビと同様のチャンネル番号になっているはずです
      - また、リモコン番号が重複するチャンネルの場合は、Ch: 011-1 のように表示されるように変更しました
    - **録画番組のリスト表示に対応した**
      - 通常表示よりもサムネイルが小さくなり、一度に多くの番組を表示できるようになります
      - 要望を受けての実装ですが、割といいかもしれません
      - 個人設定 → ［録画番組のリスト表示］をオンにするか、右上の︙メニュー →［リスト表示に切り替え］をクリック or タップすると、録画番組が細長いリストで表示されます
      - 個人設定 → ［録画番組のリスト表示］をオフにするか、右上の︙メニュー →［通常表示に切り替え］をクリック or タップすると、録画番組が通常通り（今まで通り）表示されます
    - **ファイル再生時に右側のコメント欄を再生時間に合わせてスクロールするようにした**
      - ライブ配信時にスクロールしていたものをファイル再生時でもできるようにしてみました
    - **ライブ配信時のコメント欄のスクロールを滑らかにした**
      - 滑らかにはしてみましたが、時間が経つとだんだん滑らかではなくなってきます（いまのところ原因不明・適宜リロードしてください）
    - **スマホ・タブレットの場合にプレイヤーに10秒早送り・巻き戻しできるボタンを表示するようにした**
      - 続けてタップすることで10の倍数分早送り・巻き戻しできます（アプリ版 YouTube の実装をちょっと真似た）
      - ショートカットキーが使えない上シークバーで再生時間を操作しなければならないなど、操作性に難があった操作が大幅に改善されます
    - **録画番組の検索で大文字と小文字を区別しないようにした**
      - RegExp に i オプション入れただけ…
    - **番組名内のマーク（ [字] など）の修飾処理を改善した**
      - 今まではただ単に大かっこで囲われてる文字をマークとして修飾していたのですが、マークでない文字列まで修飾されてしまうことがあったため、
      EDCB の [ARIB8CharDecode.h](https://github.com/xtne6f/EDCB/blob/work-plus-s/EpgDataCap3/EpgDataCap3/ARIB8CharDecode.h) を参考に定義されているもののみ修飾するようにしました
    - **ch2 に CS110 が存在しない場合に CS タブに BS のチャンネルが表示されてしまう不具合を修正**
      - 手抜き実装が裏目に出た
    - **Apache のログを完全に出力しないようにした**
      - Apache はログを勝手に消してくれないので放置してると数 GB になることが…（それが原因で動作がおかしくなったことがあったので…）
    - **ページ遷移時にcoverをかけるようにした**
      - SPA ではありませんが、体感的に素早く遷移しているように見せるための実装です
    - **設定項目の PWA・HTTPS を一番下に配置するようにした**
      - 使用頻度が高いわけでもないのに上にあるのは邪魔なので（特にスマホ）…
    - **MP4・MKV を再生する場合にチェックボックスで不正な値を設定できないようにした**
      - 今までは画質は Progressive・エンコーダーは ffmpeg みたいな不正な値を入力できてしまい不具合が多発していました
      - 正直もう jQuery 地獄でつらい
      - 5ch でも指摘があったので…
    - **ディレクトリ（フォルダ）構造を変更・整理した**
      - TVRemotePlus の内部ファイル・ライブラリは基本的に modules フォルダに入れるようにしました
      - twitteroauth も modules フォルダに移動になっています
    - **Twitter 投稿時のデフォルトのアップロードフォルダを変更した**
      - 前述しましたが、upload/ に設定している場合は今回のバージョンから空に設定してください（自動で (TVRemotePlus)/data/upload/ に保存します）
    - **ハッシュタグ付きツイートのタイムスタンプを Cookie に記録するようにした**
      - 複数のユーザーがログインしている場合に色々問題があるな…と思ったので…
      - tweet_time.txt は廃止となります
    - **ストリーム管理周りの処理の改善**
      - v2.0.0 で実装が甘かった部分を中心に実装しています
    - **アイコンを改善した**
      - アイコンの角丸を iOS に準じたものにしました
    - **インストール後に PHP のエラーが出る不具合を修正**
    - **インストーラーにダブルクオートを含む文字列を入力するとエラーになる不具合を修正**
    - **ストリーム終了ボタンで ffmpeg が終了できない不具合を修正**
      - ffmpeg のコマンドに , が含まれていて CSV がうまくパースできていなかったのが原因でした
    - **スマホでスクロールすると勝手にBS・CSタブから地デジタブに戻ってしまう不具合を修正**
      - 何回も修正してる気がする…。。
    - スタイルの修正
    - その他細かな修正・調整

  - **v2.0.0** - 2020/02/18
    - 待ちに待った（？）v2.0.0 です
    - 年末年始を溶かしましたが全く終わらなかった上に前回のリリースから2ヶ月以上開いてしまった…
    - **機能追加・不具合修正盛りだくさんのメジャーバージョンアップになっています**
      - **設定ファイルをバックアップした上で、上書きで新規インストールしてください**
        - 設定ファイルに新しい項目が追加されているため、単純なアップデートではエラーになります
        - インストーラー側で設定ファイルの引き継ぎ機能を追加したいところですが、そこまで余裕がありませんでした…
      - **インストールした後、ブラウザのキャッシュを削除してから開くようにしてください**
        - CSS や JavaScript のキャッシュが残っていると正常に動かないことがあります
      - **一部の URL を変更したため、リバースプロキシで運用されている方はリバースプロキシ側の設定変更が必要になります**
        - 詳しくは [Reverse_Proxy.md](Reverse_Proxy.md) を参照してください
    - 他に年度末までに終わらせないといけない事がいろいろ残っているため、いくつかの機能追加や修正が次回バージョン以降の実装に繰り越しになっています
    - **メジャーバージョンアップのためいろいろ不具合を抱えていることが予想されます、不具合があれば報告していただけると助かります**
    - **ストリームの複数同時配信に対応した**
      - 元々単一ストリーム前提で作っていたためほぼ全てのコードを修正する羽目に…
      - これにより、ライブ配信を同時配信して2つのチャンネルを行き来したり、時間のかかる録画ファイルのエンコードをライブ配信を見ている間に行わせておく、といったことができるほか、  
        録画ファイルを途中まで見てたけどリアタイしたい番組が近づいてきたので泣く泣くライブ配信でストリームを上書きする、のようなことがなくなります
      - **サイドメニューの［ストリーム終了］ボタンを［このストリームを終了］と［全てのストリームを終了］ボタンに変更した**
        - 今視聴しているストリームを終了するには［このストリームを終了］ボタンを、  
          今視聴しているストリームも含め全てのストリームを終了したい場合は［全てのストリームを終了］ボタンをそれぞれクリック or タップしてください
      - **ストリーム開始設定からどのストリームでストリームを開始するか選択できるようにした**
        - セレクトボックスより配信したいストリーム番号を選択し、ストリームを開始してください
        - 何も指定がない場合、ライブ配信の場合は現在視聴しているストリームで、ファイル再生の場合は空いているストリームでそれぞれストリームを開始します
        - デフォルトは Stream 1・2・3・4 の4ストリームが用意されており、4ストリーム全て使い切っているときのみ Stream 5 以降が利用可能になります
          - もし5ストリームを全て使い切っている場合は Stream 6 が、同様に6ストリームを全て使い切っている場合は Stream 7 が、それぞれ利用可能になります
      - **番組情報欄の下にストリーム一覧（タスク）を表示するようにした**
        - それぞれのストリームをクリック or タップすると、そのストリームの視聴画面に遷移します
        - 赤いストリーム終了ボタンをクリック or タップすると、そのストリームのみストリーム終了することができます
        - ストリームが Offline になった場合は、自動でストリーム一覧から消去されます
          - Stream 1 のみ、状態にかかわらず常にストリーム一覧に表示されます
          - 逆を言えば、Stream 1 以外のストリームは Offline のときはストリーム一覧に表示されません
            - ストリーム数に上限はないため、Stream 1 以外の Offline 表示を許容してしまうとストリーム一覧が Offline であふれてしまうためです
        - ちなみに、ストリームの状態はすべて同期されるため、例えば Stream 1 でストリームを開始した場合、Stream 1 を見ているすべての端末のストリームが自動で切り替わります
      - **現在視聴中のストリーム / メインストリームをデフォルトのストリームにする設定を追加した**
        - 新規インストール時はデフォルトでオンになっています
        - この設定をオンにすると、現在視聴中のストリーム（ライブ配信時）/ メインストリーム（ファイル再生時）をファイル再生を開始するときのデフォルトのストリームにします（同時配信機能が追加される前の動作に近い）
        - この設定をオフにすると、ストリーム開始時に空いている（ Offline の）ストリームをデフォルトのストリームとして選択し、配信中のストリームを選択しないようにします
        - 個人設定の［デフォルト設定を使い1クリックでストリームを開始する］をオンにしている場合は、自動でデフォルトに設定されているストリームでライブ配信を開始します
        - あくまでデフォルトのストリームなので、上記の設定をオンにしていない場合はセレクトボックスからストリームを変更できます
    - **ダークモードに対応した**
      - 個人設定 →［ダークモード］をオンにするとダークモードになります
      - シックな感じでかなり良いと思います（私は常にダークモードで利用しています）
      - 今のところ、実装の都合で OS がダークモードの場合でも自動では切り替わりません
      - 配色は Twitter のダークブルーをかなり参考にしました
      - これにともない、スタイルシートを改修しました
      - また、スクロールバーが細くなっています（ Firefox を除く）
    - **設定ページの URL を /setting/ から /settings/ に変更した**
      - これにともない、**リバースプロキシで運用されている方はリバースプロキシ側の設定変更が必要になります**
        - 詳しくは [Reverse_Proxy.md](Reverse_Proxy.md) を参照してください
      - この他、一部のファイルのファイル名が変更になっています
    - **ファイル再生ページの［リストをリセット］ボタンを［リストをリセット］ボタンと［再生履歴をリセット］ボタンに分割した**
      - 録画ファイルリストの挙動がおかしくなった（番組情報がずれている、毎回リスト更新が行われる）場合、リストをリセットしリストを再作成することになりますが、  
        その際に再生履歴も一緒に削除されてしまうため、再生履歴のリセット機能を［再生履歴をリセット］に分割し、［リストをリセット］時には再生履歴が削除されないようにしました
    - **番組情報がファイル内に存在しない場合（ MP4 ファイルなど）に .ts.program.txt から番組情報を取得できるようにした**
      - 今まで TS ファイルの番組情報は rplsinfo で TS ファイルから取得していたのですが、エンコード後の MP4 ファイルには録画情報が含まれていません
      - そこで、EDCB で録画した場合に（設定していれば）書き出される番組情報ファイル（.ts.program.txt）があれば、それから番組情報を取得するようにしました
      - ［番組情報ファイルのあるフォルダ］を指定した場合は、指定したフォルダ内にあるか検索します
      - ［番組情報ファイルのあるフォルダ］を指定しない場合は、録画ファイルと同じ拡張子なしファイル名.ts.program.txt があるか検索します
    - **エンコード時のログを書き出せるようにした**
      - 詳細設定の［エンコード時のログをファイルに書き出す］をオンにすると、(TVRemotePlusをインストールしたフォルダ)/data/stream(ストリーム番号).log に書き出されます
      - エンコード途中で落ちる場合にエラーを確認してみてください
    - **VCEEncC でインターレース解除ができるようにした**
      - アップデートでインターレース解除が利用できるようになったので、インターレース解除オプションを追加してみました
      - テストできる環境がないので、うまく動かない場合は報告頂けると助かります
    - **画質設定に 144p (256×144) を追加した**
      - 200kbps くらいの低速モードでも視聴できるはずです
      - 映像は荒いですが、音声は 128kbps・48000kHz に設定してあるのでラジオのように使うのもありかもしれません
    - **ケーブルテレビなど TransModulation 環境で番組表を地デジ・BS・CS に正しく分けられるようにした**
      - いただいた J:COM 用のチャンネル設定ファイルに合わせているので、他のケーブルテレビだと動かないかもしれません
      - 報告いただけると助かります
    - **ファイル再生時に、ライブ配信同様再生時間に合わせてコメント一覧を自動でスクロールするようにした**
      - 手動でコメント一覧をスクロールすると自動スクロールがオフになり、ライブ配信同様に青緑の矢印ボタンが表示されます
      - 表示されたボタンをクリック or タップすると再び自動スクロールされるようになります
    - **スマホ・タブレットでのプレイヤーの UI を改善した**
      - フォーク元の DPlayer に更新が来ていたので、それを元に使いやすくなるよう改良を加えました
      - 今までは PC 版とほぼ同じような UI だったのですが、再生 / 停止ボタンを中央に設置しました
      - 再生 / 停止ボタンの位置変更により、アイコンのサイズが大きくなりました
      - 3秒間プレイヤーに何もタップしなかった場合、自動でボタンを非表示にするようにしました
    - **プレイヤーの倍速設定にに 0.25 倍・1.75 倍を追加した**
    - **キーボードショートカット（ホットキー）を追加した**
      - F キー … 全画面のオン/オフを切り替える
      - W キー … ブラウザ全画面のオン/オフを切り替える
      - P キー … ピクチャーインピクチャーのオン/オフを切り替える（ブラウザが対応している場合のみ）
      - S キー … ストリームを同期する（ライブ配信時のみ）
      - C キー … コメント入力フォームを表示・フォーカスする
      - Tab キー … ツイート入力フォームにフォーカスする/フォーカスを外す
        - ツイート入力フォームにフォーカスしているときは Tab キー以外のキーボードショートカットが効きません
        - 英字キーのキーボードショートカットを使う場合、一旦 Tab キーを押してツイート入力フォームへのフォーカスを解除してください
    - **キーボードショートカット一覧を表示できるようにした**
      - 右上のメニューから「ショートカット一覧」をクリックすると表示できます
    - **環境設定の保存ボタンを下にスクロールしたときも表示するようにした**
      - 保存するときにいちいち上に戻る必要があるのがちょっと面倒でしたが、解消されます
      - 環境設定を下にスクロールすると上に戻るボタンの隣に表示されます
    - **Basic 認証の対象から favicon（アイコン）を除外するようにした**
    - **英字フォントを Open Sans に変更**
    - **インストーラー周りの不具合を修正**
      - PHP が既にインストールされている場合にインストーラーの実行に失敗することがある不具合を修正しました
      - インストーラーのあるドライブとインストール先のドライブが異なる場合に証明書の生成に失敗する不具合を修正しました
      - 自己署名証明書の生成コマンドを変更しました
    - **空白を含むパスにインストールすると正常に動作しない不具合を修正した**
      - インストーラーが実行できないのもそうですが、多くの問題はコマンドを実行する部分で発生していました（ダブルクオートで囲んでなかったのが原因…）
      - ただ、start コマンドではダブルクオートで囲むとエラーになることがあるので、仕方なく TSTask は cmd.exe を介して実行するようにしました
        - この関係で、ライブ配信を開始すると黒いウインドウが2つ出るようになります
        - プロセス起動用の exe を作りタスクトレイに格納できるようにすることを検討していますが、いつになるかは不明…
    - **拡張子が .MTS・.M2T・.M2TS の TS ファイルが再生できない問題を修正**
      - テストはしていないので、もしうまく行かないようであれば報告頂けると助かります
    - **リバースプロキシ周りの処理を改善**
      - リバースプロキシからのアクセスかどうかは HTTP ヘッダに X-FORWARDED-HOST があるかどうかで判定しています
      - このため、X-FORWARDED-HOST ヘッダが送信されないリバースプロキシの場合はリバースプロキシからのアクセスかどうかを判定できません
    - **リバースプロキシからのアクセス時に Chrome で JavaScript 経由でキャストができない事がある問題を修正**
      - 数ヶ月間悩みの種だったけど $(function 内でイベントを定義していたため発火していなかっただけだったという…
    - **キャスト機能周りのコードの整理**
    - **サイドメニュー表示中にスクロールできないようにした (タッチデバイスのみ)**
      - スクロールしてしまうと URL バーの出入りで要素が途切れるなど何かと不都合なためです
    - **リスト更新処理周りの不具合の修正とコードの整理**
    - **iPhone で一部のスタイルが崩れる問題を修正**
    - **iPhone でプレイヤーが上部に固定できない不具合を修正**
    - **1コメが存在しないときにニコニコ実況のコメントの取得に失敗する不具合を修正**
    - **再生画面のサイズを表示領域いっぱいに拡大する処理の軽量化と不具合の修正**
      - 計算上ぴったり合うはずなのに微妙にずれてしまい、結局横幅を現在の横幅+(ずれ幅*2.1)に設定することで妥協しました
    - **ウインドウがリサイズされたときにチャンネルリストの表示位置がおかしくなる不具合を修正**
    - **細かなスタイルの修正**
    - **QSVEncC を 3.28 に更新**
      - QSVEncC 3.29 から Windows7・8.1 に非対応になってしまったため、これが最後のアップデートになると思います
      - 動かないか試してみましたが、エンコード開始直後に落ちてしまいました 
    - **NVEncC を 4.64 に更新**
    - **VCEEncC を 5.01 に更新**
    - **rplsinfo を 1.5.1 に更新**
    - この他多数の軽微な修正・調整など

  - **v1.4.2** - 2019/12/03
    - 今回も不具合修正のみです…
    - **v1.3.0 以前からアップデートモードでインストールした場合、インストールに失敗します…** (Apache が起動しません)
      - Apacheを更新した関係でApacheの設定ファイルも結構変わってしまっているので、**config.php のバックアップを取った上で新規インストールモードでインストールしてください**
      - 設定をやり直すだけなので、一度フォルダを削除してからインストールする必要はありません
      - config.php を一旦リネームするなどして上書きされないよう退避し、新規インストール後、適宜以前の config.php の設定内容を新しい config.php に移し替えてください
        - 面倒なことになってしまいすみません… 設定ファイルをいい感じに更新する方法があればいいのですが
    - **インストールに失敗し、Apache がエラーで起動しない問題を修正**
      - 何度もすみません…
      - Apache の更新時のインストーラーの対応がちぐはぐになっていたみたいです…
    - **インストーラーの録画ファイルのあるフォルダの指定時にフォルダが実際にあるかどうか確認するようにした**
      - インストーラーの不具合修正のついでです
    - **タブの表示位置がおかしくなる事がある不具合を修正**
      - v1.4.0 でこのあたりを修正した時に Swiper を初期化する順番を間違えてしまっていました
    - **PWACompat.js・Push.js を更新**
      - JavaScript ライブラリ類で更新があったものをついでで更新しました

  - **v1.4.1** - 2019/12/02
    - 不具合修正のみです
    - **インストールに失敗する問題を修正**
      - openssl.cnf を同梱するのを忘れていました…
        - インストーラーは openssl.default.cnf・openssl.default.ext をそれぞれ openssl.cnf・openssl.ext にコピーし、それを編集する形を取っていました
        - 前回のアップデートで openssl.cnf の同梱が必要ではなくなったため、openssl.default.cnf を廃止し、openssl.cnf をそのまま同梱するようにしたはずでした
        - …が、.gitignore の除外設定をそのままにしていた、というのが原因です…
    - **ffmpeg を shared 版に変更した**
      - 後述の ffprobe を同梱するにあたり、shared 版の方がファイルサイズを削減できるためです
      - ffmpeg を 4.2.1 に更新できないか試してみたのですが、ffmpeg が 4.2 から ARIB 字幕を arib_caption として認識するようになりました  
        それ自体は良いのですが、字幕を -scodec copy でコピーしようとしたところ、何故か ffmpeg が勝手に WebVTT に変換しようとして  
        しかも WebVTT へのエンコーダーが存在しないためエラー吐いて落ちるというバグとしか思えない症状がどうやっても改善できなかったので、暫くは 4.1.4 のままになりそうです
        - そもそも -scodec **copy** としているのに何故 WebVTT に変換しようとするのか理解できない…
        - 映像が H.264 とはいえ HLS は MPEG2-TS 形式なので、コンテナ的にコピーできないという事はないはず…
        - 字幕が映らなくても構わないのであれば -sn オプションをつければ行けます
    - **ffprobe を同梱した**
      - 今の所使っていませんが、今後録画ファイルのコーデック確認等に使う事を想定してついでに同梱しておきます
      - 準備工事ということで…

  - **v1.4.0** - 2019/11/30
    - ぎりぎり11月中にコミットしたのでセーフ
    - 更新多めなのでちょっと他で動くかどうかが心配…
    - ちなみに 1.4.0 みたいなバージョンは メジャーバージョンアップ（機能追加がほとんど）です
    - 1.2.1 みたいなバージョンは マイナーバージョンアップ（不具合修正多め）と分けてるつもり
    - **設定ファイルの項目が変更になっています・config.php を予めバックアップした上で新規インストールし、**
    - **VCEEncC でのエンコードに対応した**
      - VCE の仕様でインタレ解除が出来ないらしいですが rigaya さんが最近の QSVEncC 等の変更に合わせて 5.00 をリリースしていたので対応する事ができました
        - いつも本当にありがとうございます…
      - こちらに VCE が使える環境があるわけではないので、動くかは微妙です…（フィードバックいただけると助かります）
    - **MKV ファイルの再生に対応した**
      - MKV で再生させてる方が結構多そうなので対応するだけしてみました
      - プログレッシブダウンロードで再生する場合、ブラウザで再生出来るコーデックは限られるため、例えば H.265 でエンコードしたファイルの場合は音声しか再生されません
        - MP4 でプログレッシブダウンロード再生させる場合も同様です
        - MKV は Firefox・Safari では再生できないみたいです（＝ Chrome 系だけっぽい？）
        - 再生できないときは適宜普通にエンコードして再生させるなりしてください（丸投げ
    - **MKV ファイルのダウンロードに対応した**
      - MKV 再生対応の完全についでです
    - **リバースプロキシ対応周りの変更**
      - HTTP ポートの設定は廃止し、自動で HTTP ポートを取得できるようにしました
      - リバースプロキシからのアクセスに正式に対応し、リバースプロキシからアクセスする時の URL を設定できるようにしました
      - この辺りがややこしくてかなり行き詰まってました
    - **リバースプロキシからのアクセス時に環境設定を非表示にする設定を追加**
      - オンにすると、リバースプロキシからのアクセス時に設定ページの環境設定を非表示にします（環境設定を保存する処理自体を封印します）
      - セキュリティ対策です、リバースプロキシを使っている方はオンにしておくことをおすすめします
      - 再びこの設定をオフにする場合は、リバースプロキシを介さずに設定ページにアクセスするか、config.php を直接編集してください
    - **DPlayer（動画プレイヤー）を更新**
      - スマホで設定画面の高さがおかしくなる不具合を修正しました
      - あとはスタイル調整とか
    - **タブを BS か CS にしたときにブラウザバー開閉でタブがおかしくなる不具合を修正**
      - なんかよくわからんけどゴニョゴニョしてたら直った
      - ブラウザのキャッシュを完全に消してからリロードしてみてください
    - **設定ページのフォームに 0123 のように0埋めされた数字を入力・保存すると 123 のように変換されてしまう不具合を修正**
      - 数値扱いできるものは数値として書き込んでいたのですが先頭が0から始まるものは除外するようにしました
    - **Mac で Option キー + 1 などのショートカットを使うと！を反対にした謎の文字が一緒に入ってしまう不具合を修正**
      - preventDefault() してなかっただけ閉廷
    - **Chrome 以外のブラウザでキャストするときにプログレッシブダウンロードの動画が再生できない不具合を修正**
      - すっかり忘れてました…
    - **インストーラー周りの変更・整理**
      - インデントを揃えたりとか
      - 証明書の作成バッチも大幅に更新しました
    - **TSTask に Theme ファイルを追加した**
      - すっかり同梱するの忘れてました…
    - **Apache を 2.4.41 に更新**
      - リリース時から一度もアップデートしていなかったため一気にやってしまいました
      - 設定やファイル等カスタムしているので数時間かけてようやく…
    - **PHP を 7.3.12 に更新**
      - 7.3.12 にしたら変なファイルが増えてたのでごっそり消しときました（配布サイズ対策）
    - **TwitterOAuth を更新**
      - 別件でちょっと弄ったのでそのついで
    - QSVEncC を 3.27 に更新
    - NVEncC を 4.55 に更新
    - デフォルトの設定内容をちょっと変更
    - りどみが雑になってたので整理
    - その他細かな修正・スタイル調整・コード整理など

  - **v1.3.1** - 2019/11/**（幻）
    - **再生履歴が表示できなくなっていた問題を修正**
      - アップデートする前に一度 (TVRemotePlus)/htdocs/files/history.json を削除してください

  - **v1.3.0** - 2019/11/03
    - システムの根幹（特にファイル再生周り）にかなり手を加えた大幅なアップデートとなっています
    - **アップデートの際の諸注意**
      - 録画ファイルリストのフォーマットが変更されているため、一度「リストをリセット」からリストをリセットし、もう一度リストを生成し直してください
      - (TVRemotePlus)/htdocs/files/info/ フォルダは廃止されました
        - アップデート時に手動でフォルダごと削除してください
      - API の名前が変更になりました
        - アップデート後に残る (TVRemotePlus)/htdocs/api/ フォルダ内の下記フォルダを手動で削除してください
          - epgguide.php
          - jkapi.php
          - searchfile.php
          - watchnow.php
        - また、リバースプロキシを利用している場合は、Apache 等の Web サーバーの設定ファイルも適宜書き換えてください
          - 詳しくは [Reverse_Proxy.md](Reverse_Proxy.md) を参照してください
      - 以前のバージョンのキャッシュがブラウザに残っていると、正常に動作しない可能性があります
        - 必ずブラウザのキャッシュを削除してからアクセスしてください
    - **MP4 ファイルの再生に対応した**
      - 以前から要望があった機能なのですが、ようやく実装できました…
      - また、MP4 ファイルであれば TS のように一々エンコードする必要はないため、ついでにプログレッシブダウンロードにも対応しました（ MP4 ファイルのみ）
        - プログレッシブダウンロードは、要は元の MP4 ファイルをそのまま再生させる方式のことです
        - 元の MP4 ファイルそのままの画質で再生できます
        - エンコードを行わないため、最初から最後まですぐに再生できます
        - 回線が遅いなどの事情がない限り、MP4 ファイルを再生する場合はプログレッシブダウンロードで再生する事をおすすめします
        - MP4 ファイル再生時はデフォルト値をプログレッシブダウンロードに設定します
      - MP4 ファイルでは番組情報が取得できないため、同じファイル名のTSファイルがあればその番組情報を借用するようにしました
        - 同じファイル名の TS ファイルがない場合、番組情報が取得できないため、ファイル名と更新時刻から推測して表示します
      - 現状、MP4 ファイルの再生時には字幕はオン・オフに関わらず表示されません
        - MP4ファイル自体に字幕が含まれていないためです
        - 将来的には同じファイル名で字幕ファイルが置いてあれば変換して表示できるようにしたいと考えています
    - **MP4 ファイルのダウンロードに対応した**
      - ついでで MP4 ファイルのダウンロードにも対応しました
      - MP4 ファイルのサムネイルにマウスをかざすか、タッチデバイスであればサムネイルをタップするとダウンロードボタンが表示されるので、それをクリック or タップするとダウンロードされます
      - 持ち出し用のスマホやタブレットに予めエンコードしておいた動画をダウンロードしておいて出先で見る、といった使い方ができると思います
      - TS ファイルはあまりにもファイルサイズが巨大な上、スマホではうまく再生できないプレイヤーが多いため、ダウンロードには非対応としています
      - 後日 TS ファイルの MP4 ファイルへのエンコード機能も実装予定です
    - **リスト更新を大幅に高速化した**
      - 遅い遅いと言われていたリスト更新の処理ですが、大幅に高速化しました
      - 遅くなっていた原因ですが、録画ファイルのあるフォルダ内にスクランブル解除に失敗した TS ファイルなどの再生できないファイルがあった場合に、30秒ほど試行した後サムネイル生成に失敗するのにも関わらず毎回生成させていたためでした…
      - サムネイル生成に一度失敗したらそれ以降サムネイルの生成を行わないようにする事で、処理を大幅に高速化する事ができました
      - 毎回2～3分かかっていたリスト更新が1番組あたり4秒程度で更新できるようになりました
    - **API 周りの変更**
      - 前述の通り、API ファイルの名前が変更になりました
      - epgguide.php → epginfo.php
      - jkapi.php → jikkyo.php
      - searchfile.php → listupdate.php
      - watchnow.php → status.php
      - 前からガバガバ英語なのと分かりづらいのと主な役目が変わってしまったAPIがあったりで名前を変えたいと思っていました
      - また、.php なしで API にアクセスするようになりました
        - 例： https://192.168.1.11:8100/api/listupdate?flush
        - この方が URL の見た目がきれいなはず…
    - **Android 版 Chrome にて Picture-in-Picture (PiP) に対応した**
      - 今まで Android 版 Chrome では JavaScript からピクチャーインピクチャーを呼び出す事が出来なかったのですが、Chrome78 より実装されたみたいです
      - 今までも全画面にした後ホームボタンを押す事で PiP モードにする事は可能でしたが、これからはプレイヤーのボタンを押すだけで PiP モードに移れるようになります
      - 「何か調べ物をしながらテレビを見る」など、いろいろ活用できると思います
      - ただし、古い Android（8.0以前…？）では OS 側が非対応のため表示できない場合があります
      - その他 PiP ボタンを追加するにあたりアイコンの位置・サイズ調整等も行いました
    - **インストーラーでの証明書生成を自動で生成できるようにした**
      - 今までの Enter 連打が必要なくなります
      - 証明書生成に失敗する環境があるらしいのですが、こちらでは生成できているので原因がよくわかっていません…
    - **ストリーム開始時のコマンドを表示できるようにした**
      - ストリーム開始時の ffmpeg や QSVEncC といったエンコード用ソフトの起動用コマンドを表示できます（ほぼほぼデバッグ用）
      - 表示させる場合は、環境設定の下の方の「ストリーム開始設定後の画面を表示せずに再生画面へリダイレクトする」をオフにしてください
    - **1080p 以外の画質で再生させた場合にアスペクト比が歪む問題を修正**
      - 前回のアップデートの弊害でした…
      - 1080p とそれ以外の画質でエンコード時のピクセルアスペクト比を分ける事で修正しました
    - **一部のチャンネルの実況勢いが表示されない問題を修正**
      - ch_sid.txt 内のチャンネル名と実際のチャンネル名が異なるケースが複数出てきています
      - 他にも実況勢いが表示されないチャンネルがあれば 5ch の方で報告していただけると助かります
    - 録画ファイルを検索後「もっと見る」をクリックすると一番上までスクロールされてしまう不具合を修正
      - ファイル再生周りをかなり改修したのでそのついでです
    - ニコニコ実況のコメントと字幕が同時にキャプチャ画像に含まれている際に合成する順番が逆なのを修正
    - NVEncC を更新
    - その他バグ修正・微調整・スタイル調整など…

  - **v1.2.2** - 2019/10/11
    - 台風で停電しそうなので早めにうｐ
    - **CH2ファイルが BonDriver_Spinel_T01_MyPC.ch2 のようなファイル名の場合にチャンネル設定ファイルがうまく取得出来ない不具合を修正**
      - 元々 BonDriver_Spinel_T1.ch2 のようなファイル名を想定していたのですが、T01 のように 2 桁にしている方や T01_MyPC のように PC 名を付けている方もいたようで…（本当は統一してほしいところなんですが）
      - ついでに BonDriver の dll の方もそのようなファイル名になっていても検出出来るようにしました
    - **コメントの遅延時間を個人設定から指定出来るようにした**
      - 0 ～ 60（秒）の範囲で指定できます
      - 個人設定は端末ごとに反映されます。注意してください。
    - **1080p で配信した場合、BS11 など 1920×1080 で放送されている局で 4:3 の比になってしまう不具合を修正**
      - アスペクト比を指定してなかったのが原因っぽいです…
    - **Mac 版 Chrome でコメント付きでキャプチャした場合にフォントが明朝体になってしまう不具合を修正**
      - なぜ sans-serif と指定しているのに serif 体になってしまうのかは謎…（ Mac のバグでは🤔）
    - **初回インストール時に初期設定に関わらず配信休止中…の音楽が流れてしまう不具合を修正**
      - 多分治ってると思います（思いたい）
    - その他軽微な修正

  - **v1.2.1** - 2019/10/03
    - **Twitter にログインしているアカウントを確認できるようにした**
      - PC の場合は青い鳥アイコンにマウスをかざすと、スマホ・タブレットの場合は青い鳥アイコンをタップすると表示されます
      - v1.2.1 以前から Twitter にログインしていた場合は「ログインしていません」と表示されます、正しく表示させる場合はもう一度ログインし直してください
    - **CBC テレビとメ～テレの実況勢い・コメントが表示されない不具合を修正**
      - メ～テレに関しては全角チルダと波ダッシュの文字コードの違いが原因でした… どうにかしろよMS（無理）
    - Font Awesome を v5.11.2 に更新
    - スタイルの微修正

  - **v1.2.0** - 2019/09/26
    - **画質設定に 1080p（1440×1080）を追加した**
      - 地デジと BS の殆どの局では 1440×1080 で放送されているので、サイズを抑えながら普通に見るのと変わらない画質で視聴できます
      - 以前の 1080p だとどうしてもスマホなどの低スペック端末ではストリームがカクつく事があったのですが、1440×1080 であればセグメントのダウンロード時間を 1920×1080 よりも低く抑えられるため、より高画質でカクつかずに再生できるようになっていると思います
      - 特に Chromecast 再生時や大画面ディスプレイでの再生時に違いが良く出るような気がします
      - これに伴い、インストール時のデフォルト画質を 1080p に変更した他、以前の 1080p（1920×1080）は　1080p-high という扱いとしました
    - **地デジと BS・CS の混合チューナーに対応した**
      - 前々から色々な方に要望されていたのですが、ようやく実装しました
      - こちらに混合チューナーの環境がないので動くかどうか微妙…
      - 地デジと BS・CS 双方を同じ BonDriver で再生させる場合は、設定ページの BonDriver のデフォルト設定を（地デジ用）・（BS・CS用）どちらとも同じ BonDriver を指定して下さい
      - これに伴い、BonDriver フォルダに無印（ T0 や S0 が付いていない）BonDriver があればそれも選べるようにしました
      - ついでに UTF-16LE（BOM 付き）がうまく読み込めず一部チャンネルの実況勢いが表示されない不具合も修正しました
    - **Chromecast キャスト機能を大幅に改善**
      - 今回のアップデートのメインです（3日ぶっ通しでようやく…）
      - **PC・Android の Chrome かつ https でアクセスしている場合に Chrome ネイティブ機能でキャストするようにした**
        - 情報が不親切な英語ドキュメントしかなくてかなり大変でした…
        - http アクセスだと動かないのでネイティブ機能を使う場合は（予め PWA 用の証明書を端末にインストールした上で）https でアクセスしてください
        - これにより Chromecast と 手元のプレイヤーの再生位置が綺麗に同期されるようになります（中々同期出来ず大変でした…）
        - JavaScript からのキャストは（当然ながら）Chrome 以外のブラウザでは使えないので今まで通りの方法でキャスト出来るようにしました
        - iOS 版 Chrome は対応してるのかしてないのか良く分からないので当面は他ブラウザ同様の対応としました
      - 今までの方もネイティブ機能に合わせ動作等を改善しました
      - あと Chromecast でなくても Google Cast に対応している製品（ AndroidTV だとか GoogleHome だとか GoogleNestHub だとか）であれば同様にキャスト出来るはずです
    - プレイヤー周り
      - **TVRemotePlus で使用している動画プレイヤー（DPlayer）を最新版に更新した**
      - **Android スマートフォンでの再生時にフルスクリーンにした場合画面を横に回転するようにした**
        - iPhone・iPad はそもそもフルスクリーン API が極めて限定的対応かつ Screen Orientation API 非対応なので無理です
      - たまに動画のシーク時にプレイヤーが再生と停止を繰り返してバグる不具合を修正・その他シーク周りの改善
      - コメント描画のさらなる高速化
        - 本当はこれ以上高速化したい（特にスマホ）んですがもう限界そう…（最初の頃と比べれば大分カクつかなくなったし…）
        - 実験台にしてるスマホがミドルレンジだししょうがないね
    - 再生ページのロード時の動作を高速化
    - スタイルの調整
    - NVEncC を 4.50 に更新
    - その他不具合修正など… 

  - **v1.1.0** - 2019/09/13
    - **新規機能の追加はあまりありませんが、ほぼ全てのファイルを修正したのでメジャーバージョンアップです**
    - 諸々不具合が修正されていると思います
    - コメントのフォントサイズをある程度変えられるようにした
      - プレイヤーのコア部分を弄ったので疲れました…
    - ファイル再生時に字幕をストリームに含めるかどうか設定できるようにした
      - ごく稀に字幕をストリームに含めると途中でエンコードに失敗してしまう録画があるためです
      - デフォルトはオンになっています、問題があった時のみオフにすることをおすすめします
    - TVRemoteViewer での番組表取得に関する情報を追記
    - コメント一覧をスクロールしている時に新しいコメントが来ると強制で下にスクロールされてしまう不具合を修正
      - 色々悩みましたが、結局 YouTube Live っぽい仕様にしました
    - 生放送時に一時停止した状態にするとコメントが溜まりに溜まる不具合を修正
    - ニコニコ実況がメンテナンスの際にメンテナンス表示を出すようにした
      - 丁度最近メンテナンスがあったのでそのついでです
    - ニコニコ実況の過去ログ取得時にコメントが多すぎる（例：ラピュタ）と実行時間制限を超えてタイムアウトしコメントが取得できない不具合を修正
      - 正直ラピュタレベルはコメントが多すぎてまともに再生できませんでした…（Canvasにしたほうが大量のコメントには強いんでしょうけど、改造元のプレイヤーがCSSアニメーションで実現させる方式のためどうしてもコメントが多くなるとかなり重くなってしまいます）
    - iOS 環境でファイル再生時にシークが出来ない（バー自体が出ない）不具合を修正
      - Safari の仕様で HLS ストリーミング再生時は video.duration が取得出来ないらしく、こちらもプレイヤーのコア部分を大幅に弄ったので疲れました
    - スマホなどのタッチデバイスでのシーク時に再生させながらシークしようとするとシークバーが荒ぶる不具合を修正
      - シーク中は一旦動画を一時停止させるようにしました
      - これもプレイヤーのコア部分を大幅ｎ（ｒｙ
    - 個人設定が数日で切れてしまう不具合を修正
      - Cookie の有効期限を365日にしました
    - 個人設定の読み込みに失敗する不具合を修正
    - スマホで見た際にヘッダーのロゴを中央寄せするようにした
    - ヘッダーのアイコンにマウスをかざした際に丸くホバーするようにした
    - 右上のサブメニュー周りの変更
      - サブメニューを閉じる際に透明な要素を置いて何もないところをクリックしたら変な所を押しちゃった、という事がないようにした
      - サブメニューが引っ込まない不具合を修正した
    - Twitter ログインの有効期限を1週間から3ヶ月に変更
      - 上の Cookie 有効期限変更のついでです
    - 絶対パスに変更しきれていなかった部分の変更
    - 全体的な速度の高速化
    - CSS レイアウト（見た目）の調整
    - 肥大化したコードを大幅に整理
    - インストーラーの微修正
    - ffmpeg.exe → ffmpeg-tvrp.exe・QSVEncC64.exe → QSVEncC64-tvrp.exe・NVEncC64.exe → NVEncC64-tvrp.exe にそれぞれ名前を変更
      - TVRemotePlus 側で他に起動している各 exe のプロセスを謝って全て kill しないための暫定処置です
    - NVEncC を 4.47 に更新
    - リリースノートを書くようにした
      - 毎回変更点が多くて作業してると何をアップデートしたか忘れるためです…
    - その他細かな不具合の修正を山程…

  - **v1.0.2** - 2019/08/30
    - ストリームの画質を向上
    - Chromecast キャスト機能の動作を修正
    - 設定が反映できない不具合を修正
    - その他不具合修正のみです

  - **v1.0.1** - 2019/08/29
    - **コメント描画、サイドメニュー開閉などの随所で使われているアニメーションの大幅な高速化**
      - フロントエンド部分は全て jQuery で書いていたのですが jQuery 自体がかなり遅く、0.5秒ごとなどに実行する処理にしては重すぎたので定期的に実行する処理はピュアJavaScriptで書き直しました
      - animate() は Velocity.js で置き換えました
      - PCだとよくわからないと思いますが、特にローエンドの Android などで今までカクついていたコメントが大分ましになっていると思います（スペックによりますが）
      - **また、プレイヤーの設定→コメントを無制限に表示 をオフにすると、生放送時で0.5秒ごとに実行するコメント取得処理時に一度に描画するコメントを8個に制限します**
        - 金曜ロードショーなど、実況勢いが200を超えるような番組で効果を発揮します
        - **低スペックPCやスマホではこの設定をオフにしておくことをお勧めします**
    - BonDriverチャンネル設定ファイル(.ch2)の取得処理の変更
      - 今まで認識出来ていた.ch2は概ね認識できると思います(思いたい)
      - **BonDriver_FSUSB2N.ch2 などのファイル名の場合、地上波用かBS・CS用か認識できません**
      - 必ず地上波用であれば BonDriver_FSUSB2N_T.ch2・BS・CS用であれば BonDriver_FSUSB2N_S.ch2 のように、ファイル名の最後に T(0-9)かS(0-9)を付けるようにしてください
    - ファイル再生画面の更新時にフェードを掛けるようにした
      - 今までより綺麗だと思います
    - Firefoxにてブックマークから開いた場合に地デジ・BS・CS切り替えタブが機能しない問題を改善
    - インストーラーで予め録画ファイルのあるフォルダを設定出来るようにした
    - Chromecast機能が動かない問題を修正
    - Chromecast機能の再生/停止関連の動作を一部修正
      - 操作の遅延が少なくなると思います
    - ファイル再生画面でリストがない場合にエラーになる問題を修正
    - ストリーム再起動が重複する問題を修正
    - その他不具合修正諸々


  - **v1.0.0** - 2019/08/27
    - **ついに正式版になりました！**（いつまでもRC版できりがなさそうなので…）
    - 環境設定設定を設定ページから変更できるようにした
      - これで config.php を一々いじる必要がなくなる他、設定ミスで文法エラーが起きることもなくなり非常に使いやすくなると思います
    - 録画ファイル増減時にリストを自動で更新するようにした
    - 地デジのチャンネルに BonDriver_*S0.dll などBSCS用BonDriverを、BSCSのチャンネルに BonDriver_*T0.dll などを表示しないようにした
      - 設定ページを作るにあたり不都合になったので一緒に修正しました
    - ストリームが途中で止まってしまった場合に20秒以上ストリームの更新がない事を検知してストリームを再起動するようにした
    - ストリーム開始して30秒以上音沙汰がなければ失敗したと判定して自動でストリーム終了するようにした
    - ファイル再生画面の画面描画時にフェードアニメーションを追加
    - ←キーで5秒巻き戻し・→キーで5秒早送り・スペースキーで再生/停止、(プレイヤーにフォーカスが当たっている状態で)↑キーで音量+・↓キーで音量- が出来るようにした
      - 実際はもっと前から出来たのですが、あまり認知されていなかったのと動作が微妙だったのでまとめて修正しました
    - Twitter ログイン時に Consumer Key 等が間違っていて認証に失敗した際にエラーメッセージを出すようにした
    - サイドメニューのバージョン欄を version 1.0.0 のように表示するようにした
    - アイコンの更新
    - その他諸々の不具合修正